<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>グリンピースじゃんけんゲーム</title>
  <link rel="stylesheet" href="w3gp.css">
</head>
<body>
  <!-- ①の画面：モンスター選択 -->
  <div id="screen1" class="screen">
    <h2>グリンピースでモンスターを倒そう！<br>倒したい敵を選んでね！！！！</h2>
    <div class="monster-select">
      <div class="monster-card">
        <div class="monster-title">初級モンスター</div>
        <div class="monster-hp">HP: 100</div>
        <button class="monster-btn" onclick="selectMonster('easy', 100)">倒す</button>
      </div>
      <div class="monster-card">
        <div class="monster-title">中級モンスター</div>
        <div class="monster-hp">HP: 150</div>
        <button class="monster-btn" onclick="selectMonster('normal', 150)">倒す</button>
      </div>
      <div class="monster-card">
        <div class="monster-title">上級モンスター</div>
        <div class="monster-hp">HP: 200</div>
        <button class="monster-btn" onclick="selectMonster('hard', 200)">倒す</button>
      </div>
    </div>
    <button class="rule-btn" onclick="showRules()">ルール</button>
  </div>

  <!-- ②の画面：モンスター出現 -->
  <div id="screen2" class="screen hidden">
    <button class="quit-btn" onclick="confirmQuit()">やめる</button>
    <div class="center-msg">
      <div id="monster-appear-msg">モンスター出現！！<br>第<span id="current-round">1</span>試合</div>
    </div>
  </div>

  <!-- ③の画面：手選択 -->
  <div id="screen3" class="screen hidden">
    <button class="quit-btn" onclick="confirmQuit()">やめる</button>
    <div class="game-info">
      <div class="round-info">第<span id="round-display">1</span>試合 / 10試合</div>
      <div class="hp-display">
        モンスターHP: <span id="monster-hp-display">100</span>
        <div class="hp-gauge-container">
          <div id="hp-gauge" class="hp-gauge"></div>
        </div>
      </div>
    </div>
    <div class="hand-select-header">
      <span>手を選ぼう！！！</span>
      <span id="timer" class="timer"></span>
    </div>
    <div class="hand-select">
      <button class="hand-btn" onclick="chooseHand('グー')">グー</button>
      <button class="hand-btn" onclick="chooseHand('チョキ')">チョキ</button>
      <button class="hand-btn" onclick="chooseHand('パー')">パー</button>
    </div>
  </div>

  <!-- ④の画面：グリンピース表示 -->
  <div id="screen4" class="screen hidden">
    <button class="quit-btn" onclick="confirmQuit()">やめる</button>
    <div class="center-msg">
      グリンピース！！
    </div>
  </div>

  <!-- ⑤の画面：あいこ -->
  <div id="screen5" class="screen hidden">
    <button class="quit-btn" onclick="confirmQuit()">やめる</button>
    <div class="aiko-msg">
      あいこ！ 素早く「ドン」を押せ！
    </div>
    <div class="result-row">
      <div class="result-card">
        <div>プレイヤーの手</div>
        <div id="player-hand5"></div>
        <button id="player-don-btn" onclick="playerDon()">ドン</button>
      </div>
      <div class="result-card">
        <div>CPUの手</div>
        <div id="cpu-hand5"></div>
        <div class="cpu-don">CPUも「ドン」を押します</div>
      </div>
    </div>
  </div>

  <!-- ⑥の画面：勝敗 -->
  <div id="screen6" class="screen hidden">
    <button class="quit-btn" onclick="confirmQuit()">やめる</button>
    <div class="game-info">
      <div class="round-info">第<span id="result-round">1</span>試合 / 10試合</div>
      <div class="hp-display">
        モンスターHP: <span id="result-monster-hp">100</span>
        <div class="hp-gauge-container">
          <div id="result-hp-gauge" class="hp-gauge"></div>
        </div>
      </div>
    </div>
    <div id="battle-result" class="battle-result"></div>
    <div class="result-row">
      <div class="result-card">
        <div>プレイヤーの手</div>
        <div id="player-hand6"></div>
      </div>
      <div class="result-card">
        <div>CPUの手</div>
        <div id="cpu-hand6"></div>
      </div>
    </div>
    <button id="next-battle-btn" class="next-battle-btn" onclick="nextBattle()">次の勝負へ</button>
  </div>

  <!-- ⑦の画面：プレイヤー勝利 -->
  <div id="screen7" class="screen hidden">
    <div class="win-msg">
      プレイヤー勝利！！！！<br>
      おめでとうございます！！！！
    </div>
    <div class="monster-defeated">
      モンスターを倒しました！
      <div>残り試合数: <span id="remaining-battles">0</span></div>
      <div>最終HP: <span id="final-hp">0</span></div>
    </div>
    <button class="title-btn" onclick="backToTitle()">タイトルに戻る</button>
  </div>

  <!-- ⑧の画面：プレイヤー敗北 -->
  <div id="screen8" class="screen hidden">
    <div class="lose-msg">
      プレイヤー敗北<br>
      また遊んでみてください！！！
    </div>
    <div class="monster-stats">
      10回の試合が終了しました
      <div>最終HP: <span id="final-hp-lose">0</span></div>
    </div>
    <button class="title-btn" onclick="backToTitle()">タイトルに戻る</button>
  </div>

  <!-- 中断確認ポップアップ -->
  <div id="quit-popup" class="popup hidden">
    <div class="popup-content">
      <p>ゲームが中断されました、タイトルに戻ります。</p>
      <button onclick="backToTitle()">OK</button>
    </div>
  </div>

  <script src="w3gp.js"></script>
</body>
</html>
